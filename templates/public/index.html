{% extends "base.html" %}
{% block title %}World Para Athletics Grand Prix - Tunisia 2025{% endblock %}
{% block content %}
<div class="hero-section bg-gradient-to-r from-red-600 to-red-800 text-white py-16 mb-12 rounded-lg">
    <div class="text-center">
        <h1 class="text-5xl font-bold mb-4">Welcome to Tunisia 2025</h1>
        <p class="text-xl mb-8">19th Edition World Para Athletics Grand Prix</p>
        <div class="grid grid-cols-2 md:grid-cols-5 gap-8">
            <div class="text-center">
                <div class="text-4xl font-bold">{{ config.NPCS_COUNT }}</div>
                <div class="text-sm opacity-90">NPCs</div>
            </div>
            <div class="text-center">
                <div class="text-4xl font-bold">{{ config.ATHLETES_COUNT }}</div>
                <div class="text-sm opacity-90">Athletes</div>
            </div>
            <div class="text-center">
                <div class="text-4xl font-bold">{{ config.VOLUNTEERS_COUNT }}</div>
                <div class="text-sm opacity-90">Volunteers</div>
            </div>
            <div class="text-center">
                <div class="text-4xl font-bold">{{ config.LOC_COUNT }}</div>
                <div class="text-sm opacity-90">LOC Members</div>
            </div>
            <div class="text-center">
                <div class="text-4xl font-bold">{{ config.OFFICIALS_COUNT }}</div>
                <div class="text-sm opacity-90">Officials</div>
            </div>
        </div>
    </div>
</div>
{% if games %}
<div class="mb-12">
    <h2 class="text-3xl font-bold mb-6">Latest Results</h2>
    <div class="space-y-6">
        {% for game in games[:5] %}
        <div class="bg-white rounded-lg shadow overflow-hidden hover:shadow-lg transition-shadow">
            <div class="p-6">
                <div class="flex justify-between items-start mb-4">
                    <div>
                        <h3 class="text-xl font-bold">{{ game.event }} - {{ game.gender }}</h3>
                        <p class="text-gray-600">{{ game.classes }} {% if game.phase %}- {{ game.phase }}{% endif %}</p>
                        <p class="text-sm text-gray-500">Day {{ game.day }} at {{ game.time }}</p>
                        {% if game.wpa_points %}
                        <span class="inline-block mt-2 px-2 py-1 text-xs bg-purple-100 text-purple-800 rounded">
                            WPA Points
                        </span>
                        {% endif %}
                    </div>
                    <div class="text-right">
                        <span class="inline-block px-3 py-1 text-sm bg-green-100 text-green-800 rounded-full">
                            Published
                        </span>
                    </div>
                </div>
                <div class="border-t pt-4">
                    {% set top_results = game.results[:3] if game.results else [] %}
                    {% if top_results %}
                    <div class="space-y-3">
                        {% for result in top_results %}
                        <div class="flex items-center justify-between">
                            <div class="flex items-center">
                                {% if result.rank == '1' %}
                                    <span class="text-2xl mr-3">ü•á</span>
                                {% elif result.rank == '2' %}
                                    <span class="text-2xl mr-3">ü•à</span>
                                {% elif result.rank == '3' %}
                                    <span class="text-2xl mr-3">ü•â</span>
                                {% else %}
                                    <span class="text-lg font-bold mr-3 w-8">{{ result.rank }}</span>
                                {% endif %}
                                <div>
                                    <span class="font-medium">{{ result.firstname }} {{ result.lastname }}</span>
                                    <span class="ml-2">
                                        <img src="/static/images/flags/{{ result.npc }}.svg" alt="{{ result.npc }}"
                                             class="inline w-6 h-4 mr-1" onerror="this.style.display='none'">
                                        {{ result.npc }}
                                    </span>
                                    <span class="ml-2 px-2 py-0.5 text-xs bg-blue-100 text-blue-800 rounded">{{ result.athlete_class }}</span>
                                </div>
                            </div>
                            <div class="text-right">
                                <div class="font-bold">
                                    {% if result.value in config.RESULT_SPECIAL_VALUES %}
                                        <span class="text-red-600">{{ result.value }}</span>
                                    {% else %}
                                        {% if game.event in config.TRACK_EVENTS %}
                                            {{ config.format_time(result.value) }}
                                        {% elif game.event in config.FIELD_EVENTS %}
                                            {{ config.format_distance(result.value) }} m
                                        {% else %}
                                            {{ result.value }}
                                        {% endif %}
                                    {% endif %}
                                </div>
                                {% if game.wpa_points and result.raza_score %}
                                <div class="text-sm text-purple-600">{{ result.raza_score }} pts</div>
                                {% endif %}
                                {% if result.record %}
                                <div class="text-xs text-yellow-600">{{ result.record }}</div>
                                {% endif %}
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                    {% else %}
                    <p class="text-gray-500 text-center py-4">Results coming soon...</p>
                    {% endif %}
                </div>
                <div class="mt-4 text-center">
                    <a href="{{ url_for('public.game_detail', id=game.id) }}"
                       class="text-blue-600 hover:text-blue-800 font-medium">
                        View Full Results <i class="fas fa-arrow-right ml-1"></i>
                    </a>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
    <div class="text-center mt-8">
        <a href="{{ url_for('public.results') }}"
           class="bg-red-600 text-white px-8 py-3 rounded-lg hover:bg-red-700 inline-block">
            View All Results
        </a>
    </div>
</div>
{% else %}
<div class="text-center py-16">
    <div class="mx-auto w-32 h-32 bg-gray-100 rounded-full flex items-center justify-center mb-8">
        <i class="fas fa-trophy text-6xl text-gray-300"></i>
    </div>
    <h2 class="text-3xl font-bold mb-4">Competition Starting Soon</h2>
    <p class="text-xl text-gray-600">Results will be published here as events are completed.</p>
</div>
{% endif %}
<div class="grid grid-cols-1 md:grid-cols-3 gap-8 mt-12">
    <div class="bg-white rounded-lg shadow p-6 text-center">
        <div class="text-4xl mb-4">üèÉ‚Äç‚ôÇÔ∏è</div>
        <h3 class="text-xl font-bold mb-2">Track Events</h3>
        <p class="text-gray-600 mb-4">Sprint, middle distance, and relay races featuring the world's fastest para-athletes.</p>
        <div class="text-sm text-gray-500">
            {% for event in config.TRACK_EVENTS[:3] %}
                <span class="inline-block bg-gray-100 px-2 py-1 rounded mr-1 mb-1">{{ event }}</span>
            {% endfor %}
            {% if config.TRACK_EVENTS|length > 3 %}
                <span class="text-gray-400">+{{ config.TRACK_EVENTS|length - 3 }} more</span>
            {% endif %}
        </div>
    </div>
    <div class="bg-white rounded-lg shadow p-6 text-center">
        <div class="text-4xl mb-4">ü•á</div>
        <h3 class="text-xl font-bold mb-2">Field Events</h3>
        <p class="text-gray-600 mb-4">Throwing and jumping events showcasing power, precision, and technique.</p>
        <div class="text-sm text-gray-500">
            {% for event in config.FIELD_EVENTS[:3] %}
                <span class="inline-block bg-gray-100 px-2 py-1 rounded mr-1 mb-1">{{ event }}</span>
            {% endfor %}
            {% if config.FIELD_EVENTS|length > 3 %}
                <span class="text-gray-400">+{{ config.FIELD_EVENTS|length - 3 }} more</span>
            {% endif %}
        </div>
    </div>
    <div class="bg-white rounded-lg shadow p-6 text-center">
        <div class="text-4xl mb-4">üßÆ</div>
        <h3 class="text-xl font-bold mb-2">WPA Points</h3>
        <p class="text-gray-600 mb-4">Advanced mathematical system enabling fair competition across all disability classes.</p>
        <a href="{{ url_for('public.raza') }}" class="text-blue-600 hover:text-blue-800 font-medium">
            Learn More <i class="fas fa-arrow-right ml-1"></i>
        </a>
    </div>
</div>
<div class="mt-12 bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg p-8">
    <div class="text-center">
        <h2 class="text-3xl font-bold mb-4">About the Competition</h2>
        <p class="text-lg text-gray-700 max-w-3xl mx-auto">
            The World Para Athletics Grand Prix Tunisia 2025 brings together the world's finest para-athletes
            for a celebration of speed, strength, and determination. Featuring both traditional classification-based
            competition and innovative WPA Points system for multi-class events, this championship represents the
            pinnacle of inclusive athletic competition.
        </p>
    </div>
</div>
{% endblock %}
